def on_up_pressed():
    global direction
    direction = "Up"
    mySprite.set_image(img("""
        . . . . . . . . . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . 8 8 8 8 8 8 . . . . . . 
                . . . . 8 8 8 8 8 8 . . . . . . 
                . . . . . . . . e . . . . . . . 
                . . . . . . . 5 e 5 . . . . . . 
                . . . . . . . 5 5 5 . . . . . . 
                . . . . . . . 5 5 5 . . . . . . 
                . . . . . . . 5 5 5 . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
    """))
controller.up.on_event(ControllerButtonEvent.PRESSED, on_up_pressed)

def on_b_pressed():
    global Broom
    info.set_score(0)
    Broom = 1
controller.B.on_event(ControllerButtonEvent.PRESSED, on_b_pressed)

def on_forever():
    music.play_tone(247, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.HALF))
    music.play_tone(392, music.beat(BeatFraction.HALF))
    music.play_tone(370, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.DOUBLE))
    music.play_tone(494, music.beat(BeatFraction.WHOLE))
    music.play_tone(440, music.beat(BeatFraction.DOUBLE))
    music.play_tone(440, music.beat(BeatFraction.WHOLE))
    music.play_tone(370, music.beat(BeatFraction.DOUBLE))
    music.play_tone(370, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.HALF))
    music.play_tone(392, music.beat(BeatFraction.HALF))
    music.play_tone(370, music.beat(BeatFraction.WHOLE))
    music.play_tone(311, music.beat(BeatFraction.WHOLE))
    music.play_tone(311, music.beat(BeatFraction.WHOLE))
    music.play_tone(349, music.beat(BeatFraction.WHOLE))
    music.play_tone(247, music.beat(BeatFraction.DOUBLE))
    music.play_tone(247, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.HALF))
    music.play_tone(392, music.beat(BeatFraction.HALF))
    music.play_tone(370, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.DOUBLE))
    music.play_tone(494, music.beat(BeatFraction.WHOLE))
    music.play_tone(587, music.beat(BeatFraction.DOUBLE))
    music.play_tone(554, music.beat(BeatFraction.WHOLE))
    music.play_tone(523, music.beat(BeatFraction.DOUBLE))
    music.play_tone(415, music.beat(BeatFraction.WHOLE))
    music.play_tone(523, music.beat(BeatFraction.WHOLE))
    music.play_tone(523, music.beat(BeatFraction.HALF))
    music.play_tone(494, music.beat(BeatFraction.HALF))
    music.play_tone(466, music.beat(BeatFraction.WHOLE))
    music.play_tone(233, music.beat(BeatFraction.DOUBLE))
    music.play_tone(392, music.beat(BeatFraction.WHOLE))
    music.play_tone(330, music.beat(BeatFraction.DOUBLE))

def on_left_pressed():
    global direction
    direction = "Left"
    mySprite.set_image(img("""
        . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . 8 8 . . . . . . . . 
                . . . . . . 8 8 . . . . . . . . 
                . . . . . . 8 8 . . . . . . . . 
                . . e e e e 8 8 . 5 5 5 5 . . . 
                . . . . . . 8 8 e e 5 5 5 . . . 
                . . . . . . 8 8 . 5 5 5 5 . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
    """))
controller.left.on_event(ControllerButtonEvent.PRESSED, on_left_pressed)

def on_right_pressed():
    global direction
    direction = "Right"
    mySprite.set_image(img("""
        . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . 8 8 . . . . . . . . 
                . . . . . . 8 8 . . . . . . . . 
                . . . . . . 8 8 . . . . . . . . 
                . 5 5 5 5 . 8 8 e e e e . . . . 
                . 5 5 5 e e 8 8 . . . . . . . . 
                . 5 5 5 5 . 8 8 . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
    """))
controller.right.on_event(ControllerButtonEvent.PRESSED, on_right_pressed)

def Save_Game():
    blockSettings.write_number("Points", info.score())
    blockSettings.write_number("Broom", Broom)

def on_down_pressed():
    global direction
    direction = "Down"
    mySprite.set_image(img("""
        . . . . . . . 5 5 5 . . . . . . 
                . . . . . . . 5 5 5 . . . . . . 
                . . . . . . . 5 5 5 . . . . . . 
                . . . . . . . 5 e 5 . . . . . . 
                . . . . . . . . e . . . . . . . 
                . . . . 8 8 8 8 8 8 . . . . . . 
                . . . . 8 8 8 8 8 8 . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . e . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
    """))
controller.down.on_event(ControllerButtonEvent.PRESSED, on_down_pressed)

def snitch():
    mySprite2.set_position(randint(0, 150), randint(0, 150))
    mySprite2.set_velocity(60, 60)
    mySprite2.set_flag(SpriteFlag.BOUNCE_ON_WALL, True)
def Load_Game():
    global Broom
    info.set_score(blockSettings.read_number("Points"))
    Broom = blockSettings.read_number("Broom")

def on_on_overlap(sprite, otherSprite):
    global askForBuy
    info.change_score_by(150)
    snitch()
    askForBuy = True
sprites.on_overlap(SpriteKind.player, SpriteKind.food, on_on_overlap)

def on_on_overlap2(sprite, otherSprite):
    statusbar.value -= 30
    mySprite.set_position(randint(0, 150), randint(0, 150))
sprites.on_overlap(SpriteKind.player, SpriteKind.enemy, on_on_overlap2)

Broom_Name = ""
broom_prompt_one = ""
direction = ""
askForBuy = False
mySprite: Sprite = None
mySprite2: Sprite = None
Broom = 0
Bought_Silver_Arrow = ""
statusbar: StatusBarSprite = None
game.set_dialog_frame(img("""
    ..66666666666666666666..
        .6699999999999999999966.
        669991111111111111199966
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        699911111111111111119996
        669991111111111111199966
        .6699999999999999999966.
        ..66666666666666666666..
"""))
game.show_long_text("Move with the arrow keys or WASD. Catch the Golden Snitch as many times as you can before your health runs out, and try to not get hit by the Bludgers. Press B to restart the game.",
    DialogLayout.FULL)
game.set_dialog_text_color(8)
Load_Game()
mySprite3 = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . .
    """),
    SpriteKind.enemy)
mySprite4 = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . f f f f f . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . .
    """),
    SpriteKind.enemy)
if blockSettings.read_number("Broom") == 1:
    Broom = 1
statusbar = statusbars.create(20, 4, StatusBarKind.health)
statusbar.position_direction(CollisionDirection.TOP)
mySprite2 = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . f f f f . . . . . . . . . . 
            . . f 1 1 f f f f f . . . . . . 
            . . f f 1 1 f f 1 f . . . . . . 
            . . . f f f 5 5 f f . . . . . . 
            . . . . . f 5 5 f . . . . . . . 
            . . . . . f f f f . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . .
    """),
    SpriteKind.food)
snitch()
mySprite = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . 8 8 . . . . . . . . 
            . . . . . . 8 8 . . . . . . . . 
            . 5 5 5 5 . 8 8 e e e e . . . . 
            . 5 5 5 e e 8 8 . . . . . . . . 
            . 5 5 5 5 . 8 8 . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . .
    """),
    SpriteKind.player)
scene.set_background_image(img("""
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999599999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995959999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959995999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999599999599999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999599999599999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999599999599959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999599999599595999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959959995995999599
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999595995959959999959
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995999599599959999959
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999959599959999959
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999959599959999959
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999959599995999599
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999959599999595999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999995999599599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999595999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999959999599999959999
        eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
        7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
"""))
controller.move_sprite(mySprite, 65, 65)
mySprite.set_flag(SpriteFlag.STAY_IN_SCREEN, True)
mySprite2.set_flag(SpriteFlag.STAY_IN_SCREEN, True)
mySprite3.set_position(randint(0, 150), randint(0, 150))
mySprite4.set_position(randint(0, 150), randint(0, 150))
mySprite3.set_velocity(45, 45)
mySprite4.set_velocity(-45, -45)
mySprite3.set_flag(SpriteFlag.STAY_IN_SCREEN, True)
mySprite4.set_flag(SpriteFlag.STAY_IN_SCREEN, True)
mySprite3.set_flag(SpriteFlag.BOUNCE_ON_WALL, True)
mySprite4.set_flag(SpriteFlag.BOUNCE_ON_WALL, True)
basic.forever(on_forever)
animation.run_image_animation(mySprite2,
    [img("""
            . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . f f f f . . . . . . . . . . . 
                . f 1 1 f f f f f . . . . . . . 
                . f f 1 1 f f 1 f . . . . . . . 
                . . f f f 5 5 f f . . . . . . . 
                . . . . f 5 5 f . . . . . . . . 
                . . . . f f f f . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
        """),
        img("""
            . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . f f f f . . . . . . . . . . . 
                . f 1 1 f f f f f . . . . . . . 
                . f f 1 1 5 5 1 f . . . . . . . 
                . . f f f 5 5 f f . . . . . . . 
                . . . . f f f f . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
        """)],
    200,
    True)
askForBuy = True
forever(on_forever)
# if (Bought_Silver_Arrow == "") {
# if (Broom != 2) {
# if (info.score() == 450) {
# broom_prompt_one = game.askForString("Silver Arrow For 450 Points? yes/no")
# game.splash(broom_prompt_one)
# if (broom_prompt_one == "yes") {
# info.changeScoreBy(-450)
# Broom = 2
# Bought_Silver_Arrow = "true"
# controller.moveSprite(mySprite, 85, 85)
# } else {
# Bought_Silver_Arrow = "false"
# }
# }
# }
# }

def on_on_update():
    global askForBuy, broom_prompt_one, Broom
    if askForBuy and info.score() % 450 == 0:
        askForBuy = False
        if Broom != 2 and info.score() >= 450:
            broom_prompt_one = game.ask_for_string("Silver Arrow For 450 Points? yes/no")
            game.splash(broom_prompt_one)
            if broom_prompt_one == "yes":
                info.change_score_by(-450)
                Broom = 2
                # Bought_Silver_Arrow = "true"
                controller.move_sprite(mySprite, 85, 85)
        if Broom != 3 and info.score() >= 900:
            broom_prompt_one = game.ask_for_string("Shooting Star For 900 Points? yes/no")
            game.splash(broom_prompt_one)
            if broom_prompt_one == "yes":
                info.change_score_by(-900)
                Broom = 3
                # Bought_Silver_Arrow = "true"
                controller.move_sprite(mySprite, 90, 90)
        if Broom != 4 and info.score() >= 1350:
            broom_prompt_one = game.ask_for_string("Cleensweep 7 For 1350 Points? yes/no")
            game.splash(broom_prompt_one)
            if broom_prompt_one == "yes":
                info.change_score_by(-1350)
                Broom = 4
                # Bought_Silver_Arrow = "true"
                controller.move_sprite(mySprite, 105, 105)
game.on_update(on_on_update)

# def on_forever():
# 
# global Score
# 
# Score = info.score()
# 
# info.set_score(Score)

def on_on_update2():
    global Broom_Name
    if Broom == 1:
        Broom_Name = "Blue Bottle"
        controller.move_sprite(mySprite, 65, 65)
    elif Broom == 2:
        Broom_Name = "Silver Arrow"
        controller.move_sprite(mySprite, 85, 85)
    elif Broom == 3:
        Broom_Name = "Shooting Star"
        controller.move_sprite(mySprite, 90, 90)
    elif Broom == 4:
        Broom_Name = "Cleansweep 7"
        controller.move_sprite(mySprite, 105, 105)
    elif Broom == 5:
        Broom_Name = "Cleansweep 11"
        controller.move_sprite(mySprite, 115, 115)
    elif Broom == 6:
        Broom_Name = "Comet Two-Ninety"
        controller.move_sprite(mySprite, 125, 125)
    elif Broom == 7:
        Broom_Name = "Nimbus 2000"
        controller.move_sprite(mySprite, 130, 130)
    elif Broom == 8:
        Broom_Name = "Nimbus 2001"
        controller.move_sprite(mySprite, 135, 135)
    elif Broom == 9:
        Broom_Name = "Firebolt"
        controller.move_sprite(mySprite, 150, 150)
    elif Broom == 10:
        Broom_Name = "Firebolt Supreme"
        controller.move_sprite(mySprite, 170, 170)
    elif Broom == 11:
        Broom_Name = "Thunderbolt VII"
        controller.move_sprite(mySprite, 180, 180)
game.on_update(on_on_update2)

def on_forever2():
    # global Score
    # Score = info.score()
    # info.set_score(Score)
    if statusbar.value <= 0:
        Save_Game()
        game.over(False)

forever(on_forever2)
